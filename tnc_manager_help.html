<!DOCTYPE html>
<html>
<head>
<title>TNC and pat Manager Help</title>
</head>
<body>

<h1>TNC and pat Manager Help</h1>
<p>
This program allows you to configure the Direwolf and ARDOP software TNCs as well as the pat Winlink client and monitor the output of these programs. Direwolf's AGW and KISS TCP ports are available to applications running on this Pi as well as over the network. This allows other hosts, like Windows PCs running RMS Express, to use the Direwolf TNC running on this Pi. The AX.25 port defined in the AX25 pane is available to other applications running on this Pi as well.
</p>
<p>
At the top of the window are the currently configured AGW and KISS TCP ports, the AX.25 port, pat's telnet port, and the URI to use to access (if pat is running) the pat web interface.
</p>
<p>
The ARDOP TNC uses G8BPQ's <a href="https://www.cantab.net/users/john.wiseman/Documents/ARDOPC.html">piardopc</a>. The TNC Manager allows you to configure piardopc via a GUI. Once configured, the ARDOP TNC is available for use by pat or other programs, like ARIM or gARIM.
</p>
<p>
Upon starting, the Manager will open a terminal window that shows the output of the TNC applications and pat.
</p>
<hr>
<h2>Table of Contents</h2>
<a href="#mainbuttons">Buttons</a><br /><br />
<a href="#startup">Startup tab</a><br /><br />
<a href="#ax25">AX25 tab</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ax25timers">AX25 Timers (TX delay, TX tail, Persist, Slot time)</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defaultax25timers">Load Default AX25 Timers button</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#savetimers">Save and Apply Settings button</a><br /><br />
<a href="#ardop">ARDOP tab</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ardopaudio">Audio Capture and Playback</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ardopptt">PTT</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ardopport">Port</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ardoparguments">piardopc arguments</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#loadardopdefaults">Load Defaults</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#saveardopsettings">Save and Apply Settings</a><br /><br />
<a href="#direwolftab">Direwolf tab</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#dwcall">Call Sign</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#adevice">Direwolf Capture/Playback ADEVICEs</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#achannels">ACHANNELS</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#channel">CHANNEL</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ptt">PTT</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#modem">MODEM</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#agwport">AGW Port</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#kissport">KISS Port</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#cbeacons">CDIGIPEAT, CFILTER, CBEACON</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#arguments">Arguments</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#loaddirewolfdefaults">Load Defaults</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#savedirewolfsettings">Save and Apply Settings</a><br /><br />
<a href="#monitor">pat tab</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#patcall">Call Sign</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#password">Winlink Password</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#grid">Locator Code</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#webport">Web Service Port</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#telnetport">Telnet Service Port</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#telnetpasswd">Telnet Service Password</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#beaconinterval">Packet Beacon Interval</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#beaconmessage">Packet Beacon Message</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#patlisteners">AX25, Telnet and ARDOP Listeners</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#patardopforcedarqbw">ARDOP Forced ARQ bandwidth</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#patardopmaxarqbw">ARDOP Max ARQ bandwidth</a><br />	
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#patardopbeaconinterval">ARDOP Beacon Interval</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#patardopenablecwid">ARDOP: Enable CW ID</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#patardopenableptt">ARDOP: pat controls PTT</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#pataliases">Edit pat Connection Aliases button</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="#savepatsettings">Save and Apply Settings</a><br /><br />
<a href="#rigcontrol">Rig Control tab</a><br />
<hr>
<h2 id="mainbuttons">Buttons</h2>
<h3>Stop & Exit</h3>
<p>
This button has the same effect as closing the app by clicking X in the upper right corner. It stops all of the TNCs and pat and closes the program
</p>

<h3>TNC</h3>
<p>
Shows the status and provides controls to stop/start/restart the TNC (Direwolf and ZX25).
</p>

<h3>PAT</h3>
<p>
Shows the status and provides controls to stop/start/restart pat.
</p>

<h3>ARDOP</h3>
<p>
Shows the status and provides controls to stop/start/restart ARDOP (piardopc).
</p>

<h3>PAT Web</h3>
<p>
Opens the default browser and connects it to pat's web service. If pat is not running, the browser will display and error.
</p>
<a href="#top">Top</a>
<hr>
<h2 id="startup">Startup tab</h2>
<p>
This tab has settings that enable you to control the behavior of the Manager when it starts. The Autostart setting will automatically start the manager at bootup using the Nexus DR-X DIP switches. Selecting anything but 'disabled' will create a script that will run if the corresponding Nexus DR-X switches are in the ON position. This will launch the Manager automatically with the Pi reboots.
</p>
<p>
The other items allow you to customize which programs start automatically whenever the Manger starts.
</p>
<p>
Click the <b>Save Startup Settings</b> to save any changes made in this pane. Those changes will take effect the next time you start the Manager.
</p>
<a href="#top">Top</a>
<hr>

<h2 id="ax25">AX25 tab</h2>
<p>Configuration parameters for AX25. These can be overriden on a per-connection basis by the client (like pat). 
</p>
<a href="#top">Top</a>
<h3 id="ax25timers">AX25 Port</h3>
The default AX25 port is <b>wl2k</b> and is stored in <code>/etc/ax25/axports</code>. Changing this value will change that file as well as update the pat configuration.
</p>
<a href="#top">Top</a>
<h3>TX Delay</h3>
<p>
The amount of time in milliseconds to wait between keying the transmitter and beginning to send data.
</p>
<a href="#top">Top</a>
<h3>TX Tail</h3>
<p>
The amount of time in milliseconds to keep the transmitter keyed after sending the data.
</p>
<a href="#top">Top</a>
<h3>Persist</h3>
<p>
Persistence is part of the <a href="https://en.wikipedia.org/wiki/Carrier-sense_multiple_access">CSMA</a> protocol. It represents the odds (out of 256) that the TNC will transmit within its slot time when no carrier is detected.
</p>
<a href="#top">Top</a>
<h3>Slot Time</h3>
<p>
Slot Time is part of the <a href="https://en.wikipedia.org/wiki/Carrier-sense_multiple_access">CSMA</a> protocol. It is the delay in milliseconds that the TNC waits before checking whether it can transmit.
</p>
<a href="#top">Top</a>
<h3 id="defaultax25timers">Load Default AX25 Timers button</h3>
<p>
Clicking this button restores the default values for TX Delay, TX Tail, Persist and Slot Time.
</p>
<a href="#top">Top</a>


<h3 id="savetimers">Save and Apply Settings button</h3>
<p>
Click to save any changes made in this pane. Those changes will take effect immediately and Direwolf and AX25 will restart.
</p>
<a href="#top">Top</a>
<hr>

<h2 id="ardop">ARDOP tab</h2>
<p>Configuration parameters for ARDOP.
</p>
<a href="#top">Top</a>

<h3 id="ardopaudio">Audio Capture and Playback</h3>
<p>
Sound card interface for capture and playback specific to the Nexus DR-X + Fe-Pi sound card. 
</p>
<table rules="all" style="border-color:DarkGray;border-width:1px;border-style:solid;">
		<tr align="center">
			<th>ADEVICE
            </th><th>Left Radio
            </th><th>Right Radio
            </th>
		</tr>
		<tr>
			<td>
				<p>Capture</p>
         </td>
			<td>
				<p><b>fepi-capture-left</b></p>
         </td>
			<td>
				<p><b>fepi-capture-right</b></p>
         </td>
		</tr>
		<tr>
			<td>
				<p>Playback</p>
         </td>
			<td>
				<p><b>fepi-playback-left</b></p>
         </td>
			<td>
				<p><b>fepi-playback-right</b></p>
         </td>
		</tr>
</table><br />
<p>
If your rig has a built-in sound interface and the rig's USB cable is attached to the Pi, it should show up in the dropdown. For example, on ICOM 7100/7300 rigs, it shows up as <b>plughw:CARD=CODEC,DEV=0</b>. For those rigs, select that same device for both capture and playback.
</p>
<a href="#top">Top</a>

<h3 id="ardopptt">PTT</h3>
<p>
<code>piardopc</code> has limited PTT options. <b>GPIO 12</b> and <b>GPIO 23</b> are available in the dropdown if your rig is connected to the left or right (respectively) data connector on the Nexus DR-X. Also available is the<b> Client handles PTT</b> option, where the program using ARDOP (pat, for example) actually controls PTT. ARDOP itself plays no role in controlling PTT in this case. The remaining option is <b>rigctld network</b>. If this option is selected, <code>piardopc</code> will use Hamlib's <code>rigctld</code> for PTT. <code>rigctld</code> can be set up to use Flrig, which makes it handy for remotely controlling other attributes of the radio, provided the rig is supported by Flrig. 
</p>
<a href="#top">Top</a>

<h3 id="ardopport">Port</h3>
<p>
The TCP port on which the ARDOP TNC is listening. Client applications use the ARDOP TNC by connecting to this port. Default is <b>8515</b>.
</p>
<a href="#top">Top</a>

<h3 id="ardoparguments">piardopc arguments</h3>
<p>
Optional arguments. Run <code>piardopc -h</code> in a Terminal for a description of the other arguments. Usually not needed. If you select <b>rigctld network</b> network for PTT, the Manager will add the appropriate arguments to <code>piardopc</code>. The default argument <code>--log=/dev/null</code> tells <code>piardopc</code> to not log to a local file. The same log data appears in the Monitor window. If you want to save the logged data, then remove this default value or change it to some other destination.
</p>
<a href="#top">Top</a>

<h3 id="loadardopdefaults">Load Defaults</h3>
<p>
Click to reset the <b>Port</b> and <b>piardopc arguments</b> fields to default values.
</p>
<a href="#top">Top</a>

<h3 id="saveardopsettings">Save and Apply Settings</h3>
<p>
Click to save any changes made in this pane. Those changes will take effect immediately and piardopc will restart.
</p>
<a href="#top">Top</a>
<hr>


<h2 id="direwolf">Direwolf tab</h2>
<h3 id="dwcall">Call Sign</h3>
<p>Your call sign with no SSID</p>
<a href="#top">Top</a>
<h3 id="adevice">Direwolf Capture/Playback ADEVICEs</h3>
<p>
Sound card interface for capture and playback specific to the Nexus DR-X + Fe-Pi sound card. Although the FePi is a sterio (in AND out) sound card, the devices below are defined in software to separate the left and right and capture and playback into separate virtual <i>mono</i> sound cards. If you use the the ADEVICES in the table below, then select 1 for the ACHANNEL as described in the next section. 
</p>
<table rules="all" style="border-color:DarkGray;border-width:1px;border-style:solid;">
		<tr align="center">
			<th>ADEVICE
            </th><th>Left Radio
            </th><th>Right Radio
            </th>
		</tr>
		<tr>
			<td>
				<p>Capture</p>
         </td>
			<td>
				<p><b>fepi-capture-left</b></p>
         </td>
			<td>
				<p><b>fepi-capture-right</b></p>
         </td>
		</tr>
		<tr>
			<td>
				<p>Playback</p>
         </td>
			<td>
				<p><b>fepi-playback-left</b></p>
         </td>
			<td>
				<p><b>fepi-playback-right</b></p>
         </td>
		</tr>
</table><br />
<p>
If your rig has a built-in sound interface and the rig's USB cable is attached to the Pi, it should show up in the dropdown. For example, on ICOM 7100/7300 rigs, it shows up as <b>plughw:CARD=CODEC,DEV=0</b>. For those rigs, select that same device for both capture and playback.
</p>
<a href="#top">Top</a>
<h3 id="achannels">ACHANNELS</h3>
<p>
The number of channels in the selected <b>ADEVICE</b> sound card. Stereo sound cards have 2 channels and mono sound cards have 1. However, if you are using the FePi settings described in the previous section (*-left, *-right), those are actually mono sound cards, so you should select 1. 
</p>
<a href="#top">Top</a>
<h3 id="channel">CHANNEL</h3>
<p>
Which of the channels to configure. For mono sound cards, this is always 0. For stereo sound cards, use 0 for the left channel and 1 for the right. 
</p>
<a href="#top">Top</a>
<h3 id="ptt">PTT</h3>
<p>
The GPIO (BCM numbering) pin to use for Push To Talk.  Nexus DR-X is wired to use <b>GPIO 12</b> for the left radio and <b>GPIO 23</b> for the right radio. The other option is <b>RIG 2 localhost:4532</b>, which tells Direwolf to use <code>rigctl</code> to communicate with Hamlib's <code>rigctld</code> for PTT for radios that have CAT control.
</p>
<a href="#top">Top</a>
<h3 id="modem">MODEM</h3>
<p>
Tells Direwolf which tones or modem to use. Default is <b>1200</b>, which uses AFSK tones of 1200 and 2200. This is the most common for packet. The station you are connecting to must use the same modem and tones.
</p>
<a href="#top">Top</a>

<h3 id="agwport">AGW Port</h3>
<p>
Start Direwolf listening for AGW connections on the specified port. Programs such as Xastir can use AGW on the same host or via a network connection to access the Direwolf TNC.
</p>
<a href="#top">Top</a>

<h3 id="kissport">KISS Port</h3>
<p>
Start Direwolf listening for KISS connections on the specified port. Programs such as RMS Express and others can use KISS to access the Direwolf TNC across a network or on the same host.
</p>
<a href="#top">Top</a>

<h3 id="cbeacons">CDIGIPEAT, CFILTER, CBEACON</h3>
<p>
Add <code>0 0</code> in the <b>CDIGIPEAT</b> field to enable Direwolf's digipeater function. You can alos specify a <b>CFILTER</b> and a <b>CBEACON</b> (recommended if you enable <b>CDIGIPEAT</b>). The default values for this Manager are:

<pre>
CBEACON 0 0
CBEACON delay=1 every=15 info="Nexus DR-X digipeater"
</pre>
<code>CFILTER</code> is blank (meaning no filter) by default.
</p>
<p>
See the <a href="https://github.com/wb2osz/direwolf/tree/master/doc"> Direwolf documentation</a> for more details.
</p>
<a href="#top">Top</a>

<h3 id="arguments">Arguments</h3>
<p>
Add any direwolf command line arguments here. You can specify your own <code>direwolf.conf</code> by adding <code>-c path-to-config-file</code> here. This will override any other settings you make in this pane, except for the Arguments field of course. Default arguments: <code>-r 48000 -t 2 -d uo</code>
<pre>
<code>
Direwolf Arguments:
    -c fname       Configuration file name.
    -l logdir      Directory name for log files.  Use . for current.
    -r n           Audio sample rate, per sec.
    -n n           Number of audio channels, 1 or 2.
    -b n           Bits per audio sample, 8 or 16.
    -B n           Data rate in bits/sec for channel 0.  Standard values are 300, 1200, 2400, 4800, 9600.
                     300 bps defaults to AFSK tones of 1600 & 1800.
                     1200 bps uses AFSK tones of 1200 & 2200.
                     2400 bps uses QPSK based on V.26 standard.
                     4800 bps uses 8PSK based on V.27 standard.
                     9600 bps and up uses K9NG/G3RUH standard.
                     AIS for ship Automatic Identification System.
                     EAS for Emergency Alert System (EAS) Specific Area Message Encoding (SAME).
    -g             Force G3RUH modem regardless of speed.
    -j             2400 bps QPSK compatible with direwolf <= 1.5.
    -J             2400 bps QPSK compatible with MFJ-2400.
    -P xxx         Modem Profiles.
    -A             Convert AIS positions to APRS Object Reports.
    -D n           Divide audio sample rate by n for channel 0.
    -X n           1 to enable FX.25 transmit.
    -d             Debug options:
       a             a = AGWPE network protocol client.
       k             k = KISS serial port or pseudo terminal client.
       n             n = KISS network client.
       u             u = Display non-ASCII text in hexadecimal.
       p             p = dump Packets in hexadecimal.
       g             g = GPS interface.
       w             w = Waypoints for Position or Object Reports.
       t             t = Tracker beacon.
       o             o = output controls such as PTT and DCD.
       i             i = IGate.
       m             m = Monitor heard station list.
       f             f = packet Filtering.
       h             h = hamlib increase verbose level.
       x             x = FX.25 increase verbose level.
    -q             Quiet (suppress output) options:
       h             h = Heard line with the audio level.
       d             d = Decoding of APRS packets.
       x             x = Silence FX.25 information.
    -t n           Text colors.  0=disabled. 1=default.  2,3,4,... alternatives.
                     Use 9 to test compatibility with your terminal.
    -a n           Audio statistics interval in seconds.  0 to disable.
    -p             Enable pseudo terminal for KISS protocol.
    -x             Send Xmit level calibration tones.
    -u             Print UTF-8 test string and exit.
    -S             Print symbol tables and exit.
    -T fmt         Time stamp format for sent and received frames.
    -e ber         Receive Bit Error Rate (BER), e.g. 1e-5
</code>
</pre>

See the <a href="https://github.com/wb2osz/direwolf/tree/master/doc"> Direwolf documentation</a> for more details.
</p>
<a href="#top">Top</a>
<hr>

<h3 id="loaddirewolfdefaults">Load Defaults</h3>
<p>
Click to reset the <b>Port</b> and <b>and piardopc arguments</b> fields to default values.
</p>
<a href="#top">Top</a>

<h3 id="savedirewolfsettings">Save and Apply Settings</h3>
<p>
Click to save any changes made in this pane. Those changes will take effect immediately and Direwolf and AX25 will restart.
</p>
<a href="#top">Top</a>

<hr>
<h2 id="pattab">pat tab</h2>
<p>Configuration parameters for the pat Winlink email application.</p>
<a href="#top">Top</a>

<h3 id="patcall">Call Sign</h3>
<p>Your call sign with no SSID as registered with winlink.org</p>
<a href="#top">Top</a>

<h3 id="password">Winlink Password</h3>
<p>Your Winlink password as registered with winlink.org. Click the <b>Edit password in visible text</b> button to make the password visible for easier editing.
</p>
<a href="#top">Top</a>

<h3 id="grid">Location Code</h3>
<p>Six character maidenhead grid square. See <a href="https://www.levinecentral.com/ham/grid_square.php">Amateur Radio Ham Radio Maidenhead Grid Square Locator Map</a></p>
<a href="#top">Top</a>

<h3 id="webport">Web Service Port</h3>
<p>Port number pat uses to start its web service. This allows you to access pat's web interface from a browser on this Pi or via a browser on a PC that is on the same network as this Pi. Default is <b>8049</b>.</p>
<a href="#top">Top</a>

<h3 id="telnetport">Telnet Service Port</h3>
<p>Port number pat listens on so external applications can communicate with pat using telnet. This allows you to access pat's telnet interface from a command line on this Pi or from a PC using a suitable application that is on the same network as this Pi. Default is <b>8774</b>.</p>
<a href="#top">Top</a>

<h3 id="telnetpasswd">Telnet Service Password</h3>
<p>When pat is running with the telnet service enabled, users connecting to pat must provide this password. The default is no password.</p>
<a href="#top">Top</a>

<h3 id="beaconinterval">Packet Beacon Interval</h3>
<p>When pat is running, your radio will beacon an IDENT message periodically, so other hams know you are capable of P2P. Default is 3600 seconds. Set it to 0 to disable beacons.</p>
<a href="#top">Top</a>

<h3 id="beaconmessage">Packet Beacon Message</h3>
<p>When pat is running, your radio will beacon an IDENT message periodically, so other hams know you are capable of P2P. This text will be sent as part of the beacon. Default is <b>Winlink P2P</b>.</p>
<a href="#top">Top</a>

<h3 id="patlisteners">AX25, Telnet and ARDOP Listeners</h3>
<p>
Check the boxes corresponding to the services you want pat to listen on. This will allow pat to receive incoming requests via AX25 (Winlink P2P, for example), Telnet and/or Ardop.
</p>
<a href="#top">Top</a>

<h3 id="patardopforcedarqbw">ARDOP Forced ARQ Bandwidth</h3>
<p>pat will force the ARQ bandwidth to the ARDOP Max ARQ Bandwidth (defined in the next field). Default is <b>No</b> (unchecked).</p>
<a href="#top">Top</a>

<h3 id="patardopmaxarqbw">ARDOP Max ARQ Bandwidth</h3>
<p>Default/listen ARQ bandwidth. Default is <b>500</b>.</p>
<a href="#top">Top</a>

<h3 id="patardopbeaconinterval">ARDOP Beacon Interval</h3>
<p>pat will send ID frame at a regular interval when the listener is active (unit is seconds). Default is 0 (no beacon).</p>
<a href="#top">Top</a>

<h3 id="patardopenablecwid">ARDOP: Enable CW ID</h3>
<p>pat will send FSK CW ID after an ID frame. Default is enabled (checked).</p>
<a href="#top">Top</a>

<h3 id="patardopenableptt">ARDOP: pat controls PTT</h3>
<p>pat will, via Hamlib, control PTT for ARDOP. Default is disabled (unchecked).</p>
<a href="#top">Top</a>

<h3 id="pataliases">Edit pat Connection aliases button</h3>
<p>
Clicking this button opens another program that allows you to manage the aliases (shortcuts) used in the pat web interface.
</p>
<a href="#top">Top</a>
<hr>

<h3 id="savepatsettings">Save and Apply Settings</h3>
<p>
Click to save any changes made in this pane. Those changes will take effect immediately and pat will restart.
</p>
<a href="#top">Top</a>

<h2 id="rigcontrol">Rig Control tab</h2>
<p>
pat uses Rig Control, which is part of <a href="https://github.com/Hamlib/Hamlib/wiki">Hamlib</a>. Pat uses Rig Control to QSY supported radios. It only implements the ability to change a supported rig's frequency, however. It does not implement any other rig control functions. This tab presents information about rig control and a button that when clicked opens a program that allows you to manage rig control.
</p>
<a href="#top">Top</a>

</body>
</html>

